var IMPEncrypt={display:function(a){a=decodeURIComponent(a).evalJSON(true);this.action=a.action;this.params=a.params;this.uri=a.uri;var b=new Element("FORM",{action:"#",id:"RB_confirm"}).insert(new Element("P").insert(a.text)).insert(new Element("INPUT",{type:"text",size:15})).insert(new Element("INPUT",{type:"button",className:"button",value:a.ok_text}).observe("click",this._onClick.bind(this))).insert(new Element("INPUT",{type:"button",className:"button",value:a.cancel_text}).observe("click",this._close.bind(this))).observe("keydown",function(c){if((c.keyCode||c.charCode)==Event.KEY_RETURN){c.stop();this._onClick(c)}}.bind(this));RedBox.overlay=true;RedBox.onDisplay=Form.focusFirstElement.curry(b);RedBox.showHtml(b)},_close:function(){var a=RedBox.getWindowContents();[a,a.descendants()].flatten().compact().invoke("stopObserving");RedBox.close()},_onClick:function(a){params=this.params||{};params.passphrase=$F(a.findElement("form").down("input"));new Ajax.Request(this.uri,{parameters:params,onSuccess:this._onSuccess.bind(this),onFailure:this._onFailure.bind(this)})},_onSuccess:function(a){try{a=a.responseText.evalJSON(true)}catch(b){}if(a.response.success){this._close();if(this.action){this.action()}else{location.reload()}}else{if(a.response.error){alert(a.response.error)}}},_onFailure:function(a){}};