var ImpMessage={_arrowHandler:function(a){if(a.altKey||a.shiftKey||a.ctrlKey){return}switch(a.keyCode||a.charCode){case Event.KEY_LEFT:if($("prev")){document.location.href=$("prev").href}break;case Event.KEY_RIGHT:if($("next")){document.location.href=$("next").href}break}},submit:function(a){switch(a){case"spam_report":if(!window.confirm(IMP.text.spam_report)){return}break;case"notspam_report":if(!window.confirm(IMP.text.notspam_report)){return}break}$("actionID").setValue(a);$("messages").submit()},flagMessage:function(b){var a=$("flag1"),c=$("flag2");if((b==1&&$F(a))||(b==2&&$F(c))){$("flag").setValue((b==1)?$F(a):$F(c));this.submit("flag_message")}},transfer:function(d,b){var c,a=$("targetMbox");a.setValue((b==1)?$F("target1"):$F("target2"));if($F(a)=="*new*"){c=window.prompt(IMP.text.newfolder,"");if(c!=null&&c!=""){$("newMbox").setValue(1);a.setValue(c);this.submit(d)}}else{if(!$F(a)){window.alert(IMP.text.target_mbox)}else{this.submit(d)}}},updateFolders:function(a){var b=(a==1)?2:1;$("target"+b).selectedIndex=$("target"+a).selectedIndex},_messageActionsHover:function(){var a=new Element("IFRAME",{scrolling:"no",frameborder:0}).setStyle({position:"absolute"}).hide();a.writeAttribute("src","javascript:false;");$$("UL.msgactions LI").each(function(b){var c,e=b.down("UL"),d;if(!e){return}c=a.cloneNode(false);b.insert(c);c.clonePosition(e);d=b.getStyle("zIndex");if(d==""){b.setStyle({zIndex:2});c.setStyle({zIndex:1})}else{c.setStyle({zIndex:parseInt(d)-1})}b.observe("mouseout",function(){this.removeClassName("hover");b.down("iframe").hide()});b.observe("mouseover",function(){this.addClassName("hover");b.down("iframe").show()})})},onDomLoad:function(){if(!this.printmode){document.observe("keydown",this._arrowHandler.bindAsEventListener(this));document.observe("change",this._changeHandler.bindAsEventListener(this));if(Prototype.Browser.IE){this._messageActionsHover()}}},onLoad:function(){if(this.printmode){Event.observe(window,"afterprint",function(){window.close()});try{window.print()}catch(a){}}},_changeHandler:function(a){var b=a.element().readAttribute("id");if(b.startsWith("flag")){this.flagMessage(b.substring(4))}else{if(b.startsWith("target")){this.updateFolders(b.substring(6))}}}};document.observe("dom:loaded",ImpMessage.onDomLoad.bind(ImpMessage));Event.observe(window,"load",ImpMessage.onLoad.bind(ImpMessage));